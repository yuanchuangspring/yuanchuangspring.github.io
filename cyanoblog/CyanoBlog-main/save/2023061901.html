<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>CyanoBlog</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="../index.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md bg-dark navbar-dark">
      <!-- Brand -->
      <div class="container">
        <a class="navbar-brand" href="your blog url">CyanoBlog</a>
      
        <!-- Toggler/collapsibe Button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
      <!-- Navbar links -->
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li> 
        </ul>
      </div> 
    </nav>
    <br>
    <!-- Contents -->
    <div class="container">
        <div class="card">
            <div class="card-body">
                <a href="../index.html">返回主页</a>
                
            </div>
        </div>
        <br>
        <div class="container">
               <div><h1>godot4 相机拖拽无效问题</h1></div><br>
               <div>今天用godot4的时候出了些问题。我想实现的功能是：首先，用户可以用鼠标对镜头进行拖拽，其次，用户可以使用缩放按钮来对镜头进行缩放。</div>
               <br>
               <div>看起来很基础对吧，然而，实际操作中遇到了很大的问题，第一个功能很快就做好了，我把camera2d项目挂在根节点上，然后监听inputeventmousemotion，获取鼠标相对移动，然后修改相机位置</div>
               <br>
               <div>第二个功能出了岔子，我把按钮按下的信号链接到相机上，但是相机根本没有变化。然后我求助于伟大的群友，得知godot4里面要先设置本相机为活动相机，也就是在ready函数里调用make_current()，我试了试果然有效果！</div>
               <br>
               <div>兴高采烈的我继续敲着代码，过了一会儿我对游戏进行测试，总感觉少了什么，一拍脑袋，鼠标拖不动了！</div>
               <br>
               <div>急得满头大汗，我又求助群友，可是这次没有得到答案，因为godot4里面一些新机制大家都不了解</div>
               <br>
               <div>稍作思考，我想出了一个还凑合的办法：把camera2d挂在一个sprite2d下面，然后把改变相机位置变成改变sprite的位置，最后还要注意，要设置相机的smoothing，不然会有抖动，把smoothing的速度设为20px就可以了🎉</div>
               <br>
               <div>好吧，我承认这样做会有很多问题，但是至少预期功能都实现了</div>
               <br>
               <div>题外话：与群友讨论的时候发现有些同学用+-来操作camera.zoom，其实应该用乘法，比较顺滑的缩放间隔为1.2和0.8，例如zoom*=1.2，还有别忘了在放缩前加以检查，对zoom加以限制</div>
               <br>
               <div>题外话：有群友分享了自己的双指拖拽案例，我认为实现原理是以双指的中点为依据。还有双指缩放，应该是获取了双指的距离变化</div>
              </div>
       
    </div>
  </body>
</html>